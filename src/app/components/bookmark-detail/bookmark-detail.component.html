@if (singleBookmarkSelected()) {
  <div class="detail-form">
    <h3>Bookmark Details</h3>
    <div class="field">
      <label>Title</label>
      <input type="text" [value]="selection()![0].title" name="title" />
    </div>
    <div class="field">
      <label>URL</label>
      <input type="text" [value]="selection()![0].url" name="url" />
    </div>
    <div class="tags-section">
      <label>Tags</label>
      <div class="tags-list">
        <div *ngFor="let tag of currentTags()" class="tag-chip">
          {{ tag }}
          <button (click)="removeTag(tag)">Ã—</button>
        </div>
      </div>
      <div class="tag-input">
        <input #newTag type="text" placeholder="Add tag..." (keyup.enter)="addTag(newTag)">
      </div>
    </div>

    <div class="actions">
      <button class="ai-btn" (click)="aiCategorize()" [disabled]="isCategorizing()">
        {{ isCategorizing() ? 'Categorizing...' : 'AI Categorize' }}
      </button>
    </div>
  </div>
} @else if (singleFolderSelected()) {
  <div class="detail-info">
    <h3>Folder Details</h3>
    <strong>Name: {{ selection()![0].title }}</strong>
    <p>Type: Folder</p>
  </div>
} @else if (onlyBookmarksSelected()) {
  <div class="selection-info">
    <strong>TODO: Batch tag form</strong>
    <p>Selected {{selection()?.length}} bookmarks</p>
    <div class="actions">
      <button class="ai-btn" (click)="aiCategorize()" [disabled]="isCategorizing()">
        {{ isCategorizing() ? 'AI Categorize All' : 'AI Categorize All' }}
      </button>
    </div>
  </div>
} @else if (mixedSelection()) {
  <div class="selection-info">
    <p>Selected {{selection()?.length}} items (mixed folders and bookmarks)</p>
  </div>
} @else {
  <div class="no-selection">
    <p>No item selected or selection empty</p>
    <p>Selection size: {{ selection()?.length }}</p>
    <p>Single Item Selected: {{ singleItemSelected() }}</p>
  </div>
}
